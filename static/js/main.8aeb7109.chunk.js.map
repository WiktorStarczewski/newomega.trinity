{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm/legacy lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","definitions/Ships.js","common/OmegaLoadingScreen.js","scenes/ShipSelection.js","definitions/Commanders.js","scenes/CommanderSelection.js","scenes/Combat.js","ui/OpponentSelection.js","ui/Leaderboard.js","ui/ShowLogs.js","definitions/GameEngine.js","OmegaApp.js","App.tsx","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","Ships","name","asset","description","stats","cp","hp","attack","base","variable","defence","speed","range","agility","scale","combatScale","visuals","beamColor","Color3","beamWidth","Math","PI","OmegaLoadingScreen","window","document","getElementById","style","display","ShipSelection","props","useState","currentShip","setCurrentShip","_","selectedShips","setSelectedShips","currentCp","setCurrentCp","scene","setScene","loadedMeshes","setLoadedMeshes","resourcesLoaded","setResourcesLoaded","notEnoughShips","setNotEnoughShips","getCurrentCP","reduce","memo","num","index","onDone","loadResources","reject","assetsManager","AssetsManager","each","ship","addMeshTask","onSuccess","task","newMeshes","shipIndex","position","Vector3","Zero","rotation","scalingDeterminant","isVisible","onFinish","tasks","load","loadCurrentShip","loadedMeshesOverride","meshes","mesh","className","antialias","adaptToDeviceRatio","canvasId","onSceneMount","canvas","getEngine","loadingScreen","camera","ArcRotateCamera","minZ","lowerRadiusLimit","upperRadiusLimit","activeCameras","push","attachControl","HemisphericLight","Up","intensity","background","Layer","isBackground","texture","level","wAng","onBeforeRenderObservable","add","deltaTimeInMillis","getDeltaTime","y","z","accuracy","onClick","cost","maxCp","newShip","newShipSafe","length","href","CommanderRarities","CommanderRaritiesColors","0","1","2","3","Commanders","modifier","vs","pickAnimations","positionOffset","rarity","CommanderSelection","currentCommander","setCurrentCommander","commander","commanderIndex","loadCurrentCommander","invoke","filter","animationGroups","group","contains","commanderRarityColor","commanderRarityString","commanderAttackSuffix","has","commanderAttackString","commanderDefenceSuffix","commanderDefenceString","upperAlphaLimit","lowerAlphaLimit","upperBetaLimit","lowerBetaLimit","color","newCommander","newCommanderSafe","Combat","round","setRound","showingResult","setShowingResult","combatLog","setCombatLog","shipMeshesLhs","shipMeshesRhs","afterImportMeshes","basePosition","count","direction","isLhs","newMesh","material","StandardMaterial","uniqueId","diffuseColor","i","clonedMesh","clone","floor","localLog","showAttacks","move","sourceMeshes","targetMeshes","source","sourceMesh","ind","target","targetMeshIndex","targetMesh","mat","alpha","backFaceCulling","lines","Mesh","CreateTube","FRONTSIDE","convertToFlatShadedMesh","setTimeout","dispose","showLaser","playMoves","moves","shipHpsLhs","shipHpsRhs","_recursiveMover","mainResolver","movePromise","moveType","all","slide","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CONSTANT","keyFrames","frame","value","x","abs","targetPosition","setKeys","animations","beginAnimation","moveShips","damage","hpPerShip","hpsLeft","shipsLeft","max","ceil","shipsToRemove","removeIndex","meshToRemove","shift","ParticleHelper","CreateAsync","set","systems","forEach","s","worldOffset","disposeOnStop","maxSize","minSize","start","applyHpsToVisuals","newEntry","logAttack","playRound","result","rounds","logRoundStart","lhsMoves","lhs","rhsMoves","rhs","commanderAssetLhs","commanderLhs","commanderAssetRhs","commanderRhs","selectionLhs","sceneFile","selectionRhs","playCombat","alt","src","lhsDead","rhsDead","OpponentSelection","opponents","reverse","opponent","key","selectOpponent","ethers","utils","parseBytes32String","Leaderboard","leaderboard","sort","wins","toNumber","entry","player","losses","ShowLogs","addressToName","address","findWhere","logs","log","selectLog","args","GameEngine","shipPositionsLhs","shipPositionsRhs","shipMaxHpLhs","shipMaxHpRhs","getTarget","shipPositionsOwn","shipPositionsEnemy","shipHpsEnemy","distances","positionTarget","enemyShip","distance","Number","MAX_SAFE_INTEGER","min","indexOf","getTargetLhs","getTargetRhs","calculateDamage","sourceHp","sourceMaxHp","random","capDamage","isPositionFree","find","positionIter","shipPositions","speedCheck","proposedPosition","moveShipRhs","logShoot","logMove","logLhsShoot","logLhsMove","logRhsShoot","logRhsMove","shipHp","lhsHp","rhsHp","Modes","OmegaApp","defaultLoadedState","mode","loading","trainingSelfSelection","trainingResult","trainingSelfCommander","trainingOpponent","trainingOpponentSelection","trainingOpponentCommander","trainingCp","defenders","settingDefence","settingAttack","defaultUnloadedState","ownAccount","web3Loaded","ethBalance","blockNumber","newOmegaContract","hasUnseenFights","playerName","localStorage","getItem","state","selection","this","setState","registerDefence","formatBytes32String","tx","wait","defenceSelection","_selectionToCp","setItem","provider","filters","FightComplete","attacker","on","_checkBalance","filterAttacker","fromBlock","getBlockNumber","b","toBlock","filterDefender","defender","getLogs","logsAttacker","logsDefender","concat","logsParsed","interface","parseLog","getAllDefenders","metaResult","replay","seed","_parseHp","hpInst","resultJson","getLeaderboard","logsClassName","ethBalanceString","_formatBalance","formatEther","autoCorrect","type","onChange","handlePlayerNameChange","bind","training","commanders","showLogs","defend","shipSelectionDone","commanderSelectionDone","commanderPreviewDone","opponentSelectionDone","logSelectionDone","_initWeb3","balance","parseFloat","toFixed","toString","providers","Web3Provider","ethereum","signer","getSigner","send","accounts","_loadContracts","getBalance","newOmegaJson","require","Contract","attachBlockchainEvents","Component","App","addEventListener","titleBarManager","setVisibility","appManager","setVisible","screen","orientation","lock","path","component","exact","Sentry","dsn","debug","autoSessionTracking","tracesSampleRate","ReactDOM","render"],"mappings":"6IAAA,IAAIA,EAAM,CACT,2CAA4C,CAC3C,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAiC,CAChC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,gCAAiC,CAChC,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,uCAAwC,CACvC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,kCAAmC,CAClC,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,gCAAi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","file":"static/js/main.8aeb7109.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet-controller_8.entry.js\": [\n\t\t590,\n\t\t43\n\t],\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t591,\n\t\t44\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t592,\n\t\t45\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t593,\n\t\t24\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t594,\n\t\t25\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t595,\n\t\t11\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t596,\n\t\t12\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t597,\n\t\t46\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t598,\n\t\t47\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t599,\n\t\t48\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t600,\n\t\t49\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t601,\n\t\t81\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t602,\n\t\t82\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t603,\n\t\t50\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t604,\n\t\t51\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t605,\n\t\t52\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t606,\n\t\t53\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t607,\n\t\t54\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t608,\n\t\t55\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t609,\n\t\t56\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t610,\n\t\t57\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t611,\n\t\t83\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t612,\n\t\t20\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t613,\n\t\t21\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t614,\n\t\t58\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t615,\n\t\t59\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t616,\n\t\t84\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t617,\n\t\t39\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t618,\n\t\t40\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t619,\n\t\t60\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t620,\n\t\t61\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t621,\n\t\t62\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t622,\n\t\t63\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t623,\n\t\t64\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t624,\n\t\t65\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t625,\n\t\t26\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t626,\n\t\t27\n\t],\n\t\"./ion-menu_4-ios.entry.js\": [\n\t\t627,\n\t\t18\n\t],\n\t\"./ion-menu_4-md.entry.js\": [\n\t\t628,\n\t\t19\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t629,\n\t\t14\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t630,\n\t\t15\n\t],\n\t\"./ion-nav_5.entry.js\": [\n\t\t631,\n\t\t13\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t632,\n\t\t16\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t633,\n\t\t17\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t634,\n\t\t66\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t635,\n\t\t67\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t636,\n\t\t32\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t637,\n\t\t33\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t638,\n\t\t68\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t639,\n\t\t69\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t640,\n\t\t41\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t641,\n\t\t42\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t642,\n\t\t37\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t643,\n\t\t38\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t644,\n\t\t85\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t645,\n\t\t70\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t646,\n\t\t28\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t647,\n\t\t29\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t648,\n\t\t71\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t649,\n\t\t72\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t650,\n\t\t34\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t651,\n\t\t35\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t652,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t653,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t654,\n\t\t73\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t655,\n\t\t88\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t656,\n\t\t89\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t657,\n\t\t74\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t658,\n\t\t75\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t659,\n\t\t36\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t660,\n\t\t76\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t661,\n\t\t77\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t662,\n\t\t78\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t663,\n\t\t30\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t664,\n\t\t31\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t665,\n\t\t22\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t666,\n\t\t23\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t667,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 529;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t671,\n\t\t98\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 531;\nmodule.exports = webpackAsyncContext;","import { Color3 } from '@babylonjs/core';\n\nexport const Ships = [\n    {\n        name: 'Frigate',\n        asset: 'assets/frigate/',\n        description: 'Cheap, quick and agile, the frigate can be used as a quick strike weapon, able to reach enemy lines quickest. Can not withstand much heat though.',\n        stats: {\n            cp: 1,\n            hp: 1000,\n            attack: {\n                base: 30,\n                variable: 5,\n            },\n            defence: 2,\n            speed: 6,\n            range: 6,\n            agility: 25,\n        },\n        scale: 1,\n        combatScale: 0.6,\n        visuals: {\n            beamColor: new Color3(0, 1, 0),\n            beamWidth: Math.PI / 256,\n        },\n    },\n    {\n        name: 'Cruiser',\n        asset: 'assets/cruiser/',\n        description: 'As lightest of the heavier ships, the cruiser retains some of the speed and maneuverability of the frigate while offering big improvements in the hull and weaponry.',\n        stats: {\n            cp: 4,\n            hp: 4000,\n            attack: {\n                base: 100,\n                variable: 20,\n            },\n            defence: 12,\n            speed: 4,\n            range: 8,\n            agility: 15,\n        },\n        scale: 6,\n        combatScale: 0.4,\n        visuals: {\n            beamColor: new Color3(0.2, 0.2, 1),\n            beamWidth: Math.PI / 96,\n        },\n    },\n    {\n        name: 'Destroyer',\n        asset: 'assets/destroyer/',\n        description: 'The destroyer is an effective killing machine, providing both effective support and serving as an artillery line raining heavy damage on enemy ships.',\n        stats: {\n            cp: 5,\n            hp: 5000,\n            attack: {\n                base: 130,\n                variable: 10,\n            },\n            defence: 15,\n            speed: 3,\n            range: 10,\n            agility: 10,\n        },\n        scale: 9,\n        combatScale: 0.5,\n        visuals: {\n            beamColor: new Color3(1, 1, 1),\n            beamWidth: Math.PI / 96,\n        },\n    },\n    {\n        name: 'Battleship',\n        asset: 'assets/battleship/',\n        description: 'Fitted with state of the art weaponry and protection, the battleship is the ultimate fighting force in the galaxy.',\n        stats: {\n            cp: 15,\n            hp: 10000,\n            attack: {\n                base: 200,\n                variable: 5,\n            },\n            defence: 20,\n            speed: 2,\n            range: 12,\n            agility: 0,\n        },\n        scale: 12,\n        combatScale: 0.6,\n        visuals: {\n            beamColor: new Color3(1, 0, 1),\n            beamWidth: Math.PI / 64,\n        },\n    },\n];\n","export class OmegaLoadingScreen {\n    displayLoadingUI() {\n        const loadingScreenDiv = window.document.getElementById('omegaLoadingScreen');\n        loadingScreenDiv.style.display = 'block';\n    }\n\n    hideLoadingUI() {\n        const loadingScreenDiv = window.document.getElementById('omegaLoadingScreen');\n        loadingScreenDiv.style.display = 'none';\n    }\n}\n","import React, { useState } from 'react';\nimport _ from 'underscore';\nimport { Engine, Scene } from 'react-babylonjs';\nimport { Vector3, AssetsManager, Layer, ArcRotateCamera, HemisphericLight } from '@babylonjs/core';\nimport '@babylonjs/loaders';\nimport { Ships } from '../definitions/Ships';\nimport { OmegaLoadingScreen } from '../common/OmegaLoadingScreen';\nimport './ShipSelection.css';\n\nexport const ShipSelection = (props) => {\n    const [ currentShip, setCurrentShip ] = useState(0);\n    const [ selectedShips, setSelectedShips ] = useState(_.map(Ships, () => { return 0 }));\n    const [ currentCp, setCurrentCp ] = useState(0);\n    const [ scene, setScene ] = useState(null);\n    const [ loadedMeshes, setLoadedMeshes ] = useState([]);\n    const [ resourcesLoaded, setResourcesLoaded ] = useState(false);\n    const [ notEnoughShips, setNotEnoughShips ] = useState(false);\n\n    const nextShip = () => {\n        const newShip = currentShip + 1;\n        const newShipSafe = newShip >= Ships.length ? 0 : newShip;\n        setCurrentShip(newShipSafe);\n        loadCurrentShip(newShipSafe, scene);\n    };\n\n    const prevShip = () => {\n        const newShip = currentShip - 1;\n        const newShipSafe = newShip < 0 ? Ships.length - 1 : newShip;\n        setCurrentShip(newShipSafe);\n        loadCurrentShip(newShipSafe, scene);\n    };\n\n    const getCurrentCP = (selectedShips) => {\n        return _.reduce(selectedShips, (memo, num, index) => {\n            return memo + (num || 0) * Ships[index].stats.cp;\n        }, 0);\n    };\n\n    const addShip = () => {\n        const cost = Ships[currentShip].stats.cp;\n        const currentCp = getCurrentCP(selectedShips);\n        if (currentCp + cost <= props.maxCp) {\n            selectedShips[currentShip] = (selectedShips[currentShip] || 0) + 1;\n            setSelectedShips(selectedShips); // TODO NEEDED?\n            setCurrentCp(getCurrentCP(selectedShips));\n        }\n\n        setNotEnoughShips(false);\n    };\n\n    const removeShip = () => {\n        if (selectedShips[currentShip] > 0) {\n            selectedShips[currentShip]--;\n            setSelectedShips(selectedShips); // TODO NEEDED?\n            setCurrentCp(getCurrentCP(selectedShips));\n        }\n    };\n\n    const onDone = () => {\n        props.onDone(selectedShips);\n    };\n\n    const afterLoadShip = (scene, newMeshes, shipIndex) => {\n        newMeshes[0].position = Vector3.Zero();\n        newMeshes[0].rotation = new Vector3(-Math.PI / 12, Math.PI, 0);\n        newMeshes[0].scalingDeterminant = 0.001 * Ships[shipIndex].scale;\n        newMeshes[0].isVisible = false;\n    };\n\n    const loadResources = (scene) => {\n        return new Promise((resolve, reject) => {\n            const loadedMeshes = [];\n\n            const assetsManager = new AssetsManager(scene);\n            _.each(Ships, (ship, index) => {\n                const task = assetsManager.addMeshTask(index, '',\n                    Ships[index].asset,\n                    'scene.gltf');\n                task.onSuccess = (task) => {\n                    loadedMeshes[index] = task.loadedMeshes;\n                    afterLoadShip(scene, task.loadedMeshes, index);\n                };\n            });\n\n            assetsManager.onFinish = (tasks) => {\n                setLoadedMeshes(loadedMeshes);\n                resolve(loadedMeshes);\n            };\n\n            assetsManager.load();\n        });\n    };\n\n    const loadCurrentShip = (currentShip, scene, loadedMeshesOverride) => {\n        const meshes = loadedMeshesOverride || loadedMeshes;\n\n        _.each(scene.meshes, (mesh) => {\n            mesh.isVisible = false;\n        });\n\n        _.each(meshes[currentShip], (mesh) => {\n            mesh.isVisible = true;\n        });\n    };\n\n    const onSceneMount = (e) => {\n        const { canvas, scene } = e;\n        setScene(scene);\n\n        scene.getEngine().loadingScreen = new OmegaLoadingScreen();\n\n        const camera = new ArcRotateCamera('camera1',\n            Math.PI / 2, Math.PI / 2, 9.0, Vector3.Zero(), scene);\n        camera.minZ = 0.001;\n        camera.lowerRadiusLimit = 9.0;\n        camera.upperRadiusLimit = 9.0;\n        scene.activeCameras.push(camera);\n        camera.attachControl(canvas, true);\n\n        const light = new HemisphericLight('light1', Vector3.Up(), scene);\n        light.intensity = 0.7;\n\n        const background = new Layer('background',\n            '/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg', scene);\n        background.isBackground = true;\n        background.texture.level = 0;\n        background.texture.wAng = .2;\n\n        loadResources(scene).then((loadedMeshes) => {\n            setResourcesLoaded(true);\n            loadCurrentShip(currentShip, scene, loadedMeshes);\n        });\n\n        scene.onBeforeRenderObservable.add(() => {\n            const deltaTimeInMillis = scene.getEngine().getDeltaTime();\n\n            _.each(scene.meshes, (mesh) => {\n                const rpm = 2;\n                mesh.rotation.y +=\n                    ((rpm / 60) * Math.PI * 2 * (deltaTimeInMillis / 1000));\n                mesh.rotation.z +=\n                    ((rpm / 60) * Math.PI * 2 * (deltaTimeInMillis / 1000));\n            });\n        });\n    };\n\n    const checkEnoughShipsAndDone = () => {\n        const notEnoughShips = currentCp < props.maxCp;\n        setNotEnoughShips(notEnoughShips);\n        if (!notEnoughShips) {\n            onDone();\n        }\n    };\n\n    const shipAdderClassName = `addOrRemoveShip addShip highlightOverModal`;\n\n    return (\n        <div className=\"ShipSelection\">\n            <Engine antialias={true} adaptToDeviceRatio={true} canvasId=\"ship-selection\">\n                <Scene onSceneMount={onSceneMount}/>\n            </Engine>\n            {resourcesLoaded &&\n                <div className=\"ui\">\n                    <div className=\"uiElement shipName\">\n                        {Ships[currentShip].name}\n                    </div>\n                    <div className=\"uiElement sideBox shipStats\">\n                        <div>\n                            HP: {Ships[currentShip].stats.hp}\n                        </div>\n                        <div>\n                            Attack: {Ships[currentShip].stats.attack.base} - {Ships[currentShip].stats.attack.base + Ships[currentShip].stats.attack.variable}\n                        </div>\n                        <div>\n                            Defence: {Ships[currentShip].stats.defence}\n                        </div>\n                        <div>\n                            Speed: {Ships[currentShip].stats.speed}\n                        </div>\n                        <div>\n                            Range: {Ships[currentShip].stats.range}\n                        </div>\n                        <div>\n                            Accuracy: {Ships[currentShip].stats.accuracy}\n                        </div>\n                        <div>\n                            Agility: {Ships[currentShip].stats.agility}\n                        </div>\n                    </div>\n                    <div className=\"uiElement sideBox shipControls\">\n                        <div className={shipAdderClassName} onClick={addShip}>\n                            +\n                        </div>\n                        <div>\n                            Max CP: <span className=\"maxCp\">{props.maxCp}</span>\n                        </div>\n                        <div>\n                            CP Cost: {Ships[currentShip].stats.cp}\n                        </div>\n                        <div>\n                            Used ships: {selectedShips[currentShip] || 0}\n                        </div>\n                        <div>\n                            Used CP: {currentCp}\n                        </div>\n                        <div className=\"addOrRemoveShip removeShip\" onClick={removeShip}>\n                            -\n                        </div>\n                    </div>\n                    <div className=\"uiElement shipDescription\">\n                        {Ships[currentShip].description}\n                    </div>\n                    <div className=\"uiElement chevron left\" onClick={prevShip}/>\n                    <div className=\"uiElement chevron right\" onClick={nextShip}/>\n                    <div className=\"uiElement doneBox bottomBox\" onClick={checkEnoughShipsAndDone}>\n                        DONE\n                    </div>\n                    <a className=\"uiElement cancelBox bottomBox\" href=\"/\">\n                        BACK\n                    </a>\n                    <div className=\"omegaTip\">\n                        <div className=\"title\">\n                            Ship Selection\n                        </div>\n                        <div className=\"explanation\">\n                            <div className=\"tip\">\n                                1. The amount of ships in a fight is determined by the Command Power (CP) of the Defender fleet.\n                            </div>\n                            <div className=\"tip\">\n                                2. Each ship costs a certain amount of CP.\n                            </div>\n                            <div className=\"tip\">\n                                3. The Attacker selects a fleet, the total CP of which can not exceed the total CP of the Defender.\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n            {notEnoughShips &&\n                <div className=\"modal\">\n                    <div className=\"modal-popup\">\n                        <div className=\"modal-body\">\n                            <div className=\"modal-title\">You can still add ships to your fleet, Admiral!</div>\n                            <div>Tip: Add ships to your fleet with the + button to the right of ship portrait.</div>\n                        </div>\n                        <div className=\"modal-buttons\">\n                            <div className=\"modal-button left\" onClick={() => { setNotEnoughShips(false); }}>\n                                Back\n                            </div>\n                            <div className=\"modal-button right\" onClick={() => {\n                                setNotEnoughShips(false);\n                                onDone();\n                            }}>\n                                Start Anyway\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n}\n","import { Vector3 } from '@babylonjs/core';\n\nexport const CommanderRarities = {\n    Common: 0,\n    Rare: 1,\n    Epic: 2,\n    Legendary: 3,\n};\n\nexport const CommanderRaritiesColors = {\n    0: '#73ffbe',\n    1: '#2196F3',\n    2: '#7B1FA2',\n    3: '#FFD740',\n};\n\nexport const commanderRarityToString = (rarity) => {\n    const lookup = {\n        0: 'Common',\n        1: 'Rare',\n        2: 'Epic',\n        3: 'Legendary'\n    };\n\n    return lookup[rarity] || '';\n};\n\nexport const Commanders = [\n    {\n        name: 'XT-101',\n        asset: 'assets/robot_5/',\n        description: 'Standard issue command robot issued to all Commanders. First and last iteration of its kind, provides slight bonuses to attack and defence.',\n        stats: {\n            attack: {\n                modifier: 2,\n                vs: 0,\n            },\n            defence: {\n                modifier: 2,\n                vs: 0,\n            },\n        },\n        scale: 10,\n        visuals: {\n            pickAnimations: ['Ball_To_Stand', 'Idle', 'Idle_Look_Back', 'Idle_Look_Side'],\n            positionOffset: new Vector3(0, 0.8, 0),\n        },\n        rarity: CommanderRarities.Common,\n    },\n    {\n        name: 'YT-106',\n        asset: 'assets/worker_12/',\n        description: 'Military grade command robot, in its sixth iteration. Smarter and more effective than the XT, is also known to be moody and disingenuous.',\n        stats: {\n            attack: {\n                modifier: 3,\n                vs: 1,\n            },\n            defence: {\n                modifier: 3,\n                vs: 1,\n            },\n        },\n        scale: 300,\n        visuals: {\n\n        },\n        rarity: CommanderRarities.Rare,\n    },\n    {\n        name: 'HV-12',\n        asset: 'assets/mech_walker/',\n        description: 'Since the entire series is classified, not much is known about the origins of this killing machine. It is clearly an assasination model.',\n        stats: {\n            attack: {\n                modifier: 4,\n            },\n            defence: {\n                modifier: 3,\n            },\n        },\n        scale: 300,\n        visuals: {\n            positionOffset: new Vector3(0, -1.2, 0),\n            rotation: new Vector3(0, 0, 0),\n        },\n        rarity: CommanderRarities.Epic,\n    },\n    {\n        name: 'Magnus',\n        asset: 'assets/trooper/',\n        description: 'Cyborgs are the ultimate combination of human intuition and robot processing power. While lacking in empathy, they make for formiddable commanders.',\n        stats: {\n            attack: {\n                modifier: 10,\n            },\n            defence: {\n                modifier: 5,\n            },\n        },\n        scale: 60,\n        visuals: {\n            positionOffset: new Vector3(0, -1.8, 0),\n        },\n        rarity: CommanderRarities.Legendary,\n    },\n];\n","import React, { useState } from 'react';\nimport _ from 'underscore';\nimport { Engine, Scene } from 'react-babylonjs';\nimport { Vector3, AssetsManager, Layer, ArcRotateCamera, HemisphericLight } from '@babylonjs/core';\nimport '@babylonjs/loaders';\nimport { Commanders, CommanderRaritiesColors, commanderRarityToString } from '../definitions/Commanders';\nimport { Ships } from '../definitions/Ships';\nimport { OmegaLoadingScreen } from '../common/OmegaLoadingScreen';\nimport './CommanderSelection.css';\n\nexport const CommanderSelection = (props) => {\n    const [ currentCommander, setCurrentCommander ] = useState(0);\n    const [ scene, setScene ] = useState(null);\n    const [ loadedMeshes, setLoadedMeshes ] = useState([]);\n    const [ resourcesLoaded, setResourcesLoaded ] = useState(false);\n\n    const nextCommander = () => {\n        const newCommander = currentCommander + 1;\n        const newCommanderSafe = newCommander >= Commanders.length ? 0 : newCommander;\n        setCurrentCommander(newCommanderSafe);\n        loadCurrentCommander(newCommanderSafe, scene);\n    };\n\n    const prevCommander = () => {\n        const newCommander = currentCommander - 1;\n        const newCommanderSafe = newCommander < 0 ? Commanders.length - 1 : newCommander;\n        setCurrentCommander(newCommanderSafe);\n        loadCurrentCommander(newCommanderSafe, scene);\n    };\n\n    const onDone = () => {\n        props.onDone(currentCommander);\n    };\n\n    const afterLoadCommander = (scene, newMeshes, commanderIndex) => {\n        newMeshes[0].position = Commanders[commanderIndex].visuals.positionOffset ||\n            Vector3.Zero();\n        newMeshes[0].rotation = Commanders[commanderIndex].visuals.rotation ||\n            new Vector3(0, Math.PI, 0);\n        newMeshes[0].scalingDeterminant = 0.001 * Commanders[commanderIndex].scale;\n        newMeshes[0].isVisible = false;\n    }\n\n    const loadResources = (scene) => {\n        return new Promise((resolve, reject) => {\n            const loadedMeshes = [];\n\n            const assetsManager = new AssetsManager(scene);\n            _.each(Commanders, (commander, index) => {\n                const task = assetsManager.addMeshTask(index, '',\n                    Commanders[index].asset,\n                    'scene.gltf');\n                task.onSuccess = (task) => {\n                    loadedMeshes[index] = task.loadedMeshes;\n                    afterLoadCommander(scene, task.loadedMeshes, index);\n                };\n            });\n\n            assetsManager.onFinish = (tasks) => {\n                setLoadedMeshes(loadedMeshes);\n                resolve(loadedMeshes);\n            };\n\n            assetsManager.load();\n        });\n    };\n\n    const loadCurrentCommander = (currentCommander, scene, loadedMeshesOverride) => {\n        const meshes = loadedMeshesOverride || loadedMeshes;\n\n        _.each(scene.meshes, (mesh) => {\n            mesh.isVisible = false;\n        });\n\n        _.each(meshes[currentCommander], (mesh) => {\n            mesh.isVisible = true;\n        });\n\n        _.invoke(_.filter(scene.animationGroups, (group) => {\n            return _.contains(Commanders[currentCommander].visuals.pickAnimations, group.name);\n        }), 'play', true);\n    };\n\n    const onSceneMount = (e) => {\n        const { canvas, scene } = e;\n        setScene(scene);\n\n        scene.getEngine().loadingScreen = new OmegaLoadingScreen();\n\n        const camera = new ArcRotateCamera('camera1',\n            Math.PI / 2, Math.PI / 2, 9.0, Vector3.Zero(), scene);\n        camera.minZ = 0.001;\n        camera.upperAlphaLimit = Math.PI / 2;\n        camera.lowerAlphaLimit = Math.PI / 2;\n        camera.upperBetaLimit = Math.PI / 2;\n        camera.lowerBetaLimit = Math.PI / 2;\n        camera.lowerRadiusLimit = 9.0;\n        camera.upperRadiusLimit = 9.0;\n        scene.activeCameras.push(camera);\n        camera.attachControl(canvas, true);\n\n        const light = new HemisphericLight('light1', Vector3.Up(), scene);\n        light.intensity = 0.7;\n\n        const background = new Layer('background',\n            '/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg', scene);\n        background.isBackground = true;\n        background.texture.level = 0;\n        background.texture.wAng = .2;\n\n        loadResources(scene).then((loadedMeshes) => {\n            setResourcesLoaded(true);\n            loadCurrentCommander(currentCommander, scene, loadedMeshes);\n        });\n    };\n\n    const commanderRarityColor = CommanderRaritiesColors[Commanders[currentCommander].rarity];\n    const commanderRarityString = commanderRarityToString(Commanders[currentCommander].rarity);\n\n    const commanderAttackSuffix = _.has(Commanders[currentCommander].stats.attack, 'vs')\n        ? ` vs ${Ships[Commanders[currentCommander].stats.attack.vs].name}`\n        : '';\n    const commanderAttackString = `+${Commanders[currentCommander].stats.attack.modifier}${commanderAttackSuffix}`;\n\n    const commanderDefenceSuffix = _.has(Commanders[currentCommander].stats.defence, 'vs')\n        ? ` vs ${Ships[Commanders[currentCommander].stats.defence.vs].name}`\n        : '';\n    const commanderDefenceString = `+${Commanders[currentCommander].stats.defence.modifier}${commanderDefenceSuffix}`;\n\n\n    return (\n        <div className=\"CommanderSelection\">\n            <Engine antialias={true} adaptToDeviceRatio={true} canvasId=\"ship-selection\">\n                <Scene onSceneMount={onSceneMount}/>\n            </Engine>\n            {resourcesLoaded &&\n                <div className=\"ui\">\n                    <div className=\"uiElement commanderName\" style={{color: commanderRarityColor}}>\n                        {Commanders[currentCommander].name}\n                    </div>\n                    <div className=\"uiElement sideBox commanderStats\">\n                        <div>\n                            Rarity: <span style={{color: commanderRarityColor}}>{commanderRarityString}</span>\n                        </div>\n                        <div>\n                            Level: 1\n                        </div>\n                        <div>\n                            Experience: 0/1000\n                        </div>\n                    </div>\n                    <div className=\"uiElement sideBox commanderControls\">\n                        <div>\n                            Attack:\n                            <div>{commanderAttackString}</div>\n                        </div>\n                        <div>\n                            Defence:\n                            <div>{commanderDefenceString}</div>\n                        </div>\n                    </div>\n                    <div className=\"uiElement commanderDescription\">\n                        {Commanders[currentCommander].description}\n                    </div>\n                    <div className=\"uiElement chevron left\" onClick={prevCommander}/>\n                    <div className=\"uiElement chevron right\" onClick={nextCommander}/>\n                    <div className=\"uiElement doneBox bottomBox\" onClick={onDone}>\n                        DONE\n                    </div>\n                    <a className=\"uiElement cancelBox bottomBox\" href=\"/\">\n                        BACK\n                    </a>\n                    <div className=\"omegaTip\">\n                        <div className=\"title\">\n                            Commander Selection\n                        </div>\n                        <div className=\"explanation\">\n                            <div className=\"tip\">\n                                1. Each fleet in a fight is led by a Commander.\n                            </div>\n                            <div className=\"tip\">\n                                2. Commanders have different stats, skills, and rarity levels.\n                            </div>\n                            <div className=\"tip\">\n                                3. By winning in Ranked Combat, Commanders increase their experience and effectiveness.\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n}\n","import React, { useState } from 'react';\nimport _ from 'underscore';\nimport { Engine, Scene } from 'react-babylonjs';\nimport { Vector3, Color3, Mesh, AssetsManager, StandardMaterial, ParticleHelper, Layer,\n    Animation, ArcRotateCamera, HemisphericLight } from '@babylonjs/core';\nimport '@babylonjs/loaders';\nimport { Ships } from '../definitions/Ships';\nimport { Commanders } from '../definitions/Commanders';\nimport { OmegaLoadingScreen } from '../common/OmegaLoadingScreen';\nimport './Combat.css';\n\nconst LASER_LENGTH_MS = 500;\nconst SHOOT_GAP_MS = 500;\n\n// props: selectionLhs, selectionRhs, commanderLhs, commanderRhs, result\nexport const Combat = (props) => {\n    const [ round, setRound ] = useState(0);\n    const [ showingResult, setShowingResult ] = useState(false);\n    const [ combatLog, setCombatLog ] = useState('');\n    const [ resourcesLoaded, setResourcesLoaded ] = useState(false);\n    let shipMeshesLhs = [];\n    let shipMeshesRhs = [];\n\n    const afterImportMeshes = (scene, newMeshes, currentShip,\n        basePosition, count, direction, isLhs) => {\n\n        newMeshes[0].position = new Vector3(basePosition + currentShip * direction, 0, -currentShip * 0.2);\n        newMeshes[0].rotation = new Vector3(Math.PI * 2, Math.PI / 2  * direction, Math.PI / 2 * -direction);\n        newMeshes[0].scalingDeterminant = 0.00013 * Ships[currentShip].scale;\n\n        _.each(newMeshes, (newMesh) => {\n            newMesh.material = new StandardMaterial(_.uniqueId(), scene);\n            newMesh.material.diffuseColor = isLhs\n                ? new Color3(0, 1, 0)\n                : new Color3(1, 1, 0)\n        });\n\n        if (isLhs) {\n            shipMeshesLhs[currentShip] = [ newMeshes[0] ];\n        } else {\n            shipMeshesRhs[currentShip] = [ newMeshes[0] ];\n        }\n\n        for (let i = 0; i < count - 1; i++) {\n            const clonedMesh = newMeshes[0].clone();\n\n            if (i % 2 === 0) {\n                clonedMesh.position.y -= (Math.floor(i / 2) + 1) * Ships[currentShip].combatScale;\n            } else {\n                clonedMesh.position.y += (Math.floor(i / 2) + 1) * Ships[currentShip].combatScale;\n            }\n\n            if (isLhs) {\n                shipMeshesLhs[currentShip].push(clonedMesh);\n            } else {\n                shipMeshesRhs[currentShip].push(clonedMesh);\n            }\n        }\n    };\n\n\n    const loadResources = (scene) => {\n        return new Promise((resolve, reject) => {\n            const assetsManager = new AssetsManager(scene);\n\n            _.each(props.selectionLhs, (count, index) => {\n                if (count > 0) {\n                    shipMeshesLhs[index] = [];\n                    const task = assetsManager.addMeshTask(index, '',\n                        Ships[index].asset,\n                        Ships[index].sceneFile || 'scene.gltf');\n                    task.onSuccess = (task) => {\n                        afterImportMeshes(scene, task.loadedMeshes, index, 10, count, 1, true);\n                    };\n                }\n            });\n\n            _.each(props.selectionRhs, (count, index) => {\n                if (count > 0) {\n                    shipMeshesRhs[index] = [];\n                    const task = assetsManager.addMeshTask(index, '',\n                        Ships[index].asset,\n                        'scene.gltf');\n                    task.onSuccess = (task) => {\n                        afterImportMeshes(scene, task.loadedMeshes, index, -10, count, -1, false);\n                    };\n                }\n            });\n\n            assetsManager.onFinish = (tasks) => {\n                resolve();\n            };\n\n            assetsManager.load();\n        });\n    };\n\n    const moveShips = (scene, move, isLhs) => {\n        const meshes = isLhs ? shipMeshesLhs[move.source] : shipMeshesRhs[move.source];\n\n        return Promise.all(_.map(meshes, (mesh) => {\n            return new Promise((resolve/*, reject*/) => {\n                const framerate = 10;\n                const slide = new Animation(_.uniqueId(), 'position.x', framerate,\n                    Animation.ANIMATIONTYPE_FLOAT, Animation.ANIMATIONLOOPMODE_CONSTANT);\n                const direction = isLhs ? -1 : 1;\n                const keyFrames = [\n                    {\n                        frame: 0,\n                        value: mesh.position.x,\n                    },\n                    {\n                        frame: framerate,\n                        value: mesh.position.x + Math.abs(move.targetPosition - mesh.position.x) * direction,\n                    },\n                    {\n                        frame: 2*framerate,\n                        value: move.targetPosition,\n                    }\n                ];\n                slide.setKeys(keyFrames);\n                mesh.animations = [ slide ];\n\n                scene.beginAnimation(mesh, 0, 2 * framerate, false, 2, resolve);\n            });\n        }));\n    };\n\n    const applyHpsToVisuals = (scene, target, isLhs, shipHpsLhs, shipHpsRhs) => {\n        const hpPerShip = Ships[target].stats.hp;\n        const hpsLeft = isLhs ? shipHpsRhs[target] : shipHpsLhs[target];\n        const shipsLeft = Math.max(Math.ceil(hpsLeft / hpPerShip), 0);\n        let meshes = isLhs ? shipMeshesRhs[target] : shipMeshesLhs[target];\n        const shipsToRemove = meshes.length - shipsLeft;\n\n        for (let removeIndex = 0; removeIndex < shipsToRemove; removeIndex++) {\n            const meshToRemove = meshes.shift();\n\n            // IMPROVEME only createasync once\n            ParticleHelper.CreateAsync('explosion', scene).then((set) => {\n                set.systems.forEach(s => {\n                    s.worldOffset = meshToRemove.position;\n                    s.disposeOnStop = true;\n                    s.maxSize = 0.01;\n                    s.minSize = 0.001;\n                });\n                set.systems = [ set.systems[0] ];\n                set.start();\n            });\n\n            meshToRemove.dispose();\n        }\n    };\n\n    let localLog = '';\n\n    const logAttack = (move, isLhs) => {\n        const prefix = isLhs ? '[Attacker]' : '[Defender]';\n        const newEntry = `${prefix} ${Ships[move.source].name} hits ${Ships[move.target].name} for ${move.damage} damage.`;\n        localLog = newEntry + '\\n' + localLog;\n        setCombatLog(localLog);\n    };\n\n    const logRoundStart = (round) => {\n        const newEntry = `Round ${round + 1} begins.\\n\\n`;\n        localLog = newEntry + localLog;\n        setCombatLog(localLog);\n    };\n\n    const showLaser = (scene, source, sourceMesh, targetMesh) => {\n        const mat = new StandardMaterial('laserMat', scene);\n        mat.alpha = 0.8;\n        mat.diffuseColor = Ships[source].visuals.beamColor;\n        mat.backFaceCulling = false;\n\n        const lines = Mesh.CreateTube('laser', [\n            sourceMesh.position,\n            targetMesh.position\n        ], Ships[source].visuals.beamWidth, 64, null, 0, scene, false, Mesh.FRONTSIDE);\n        lines.material = mat;\n        lines.convertToFlatShadedMesh();\n\n        setTimeout(() => {\n            lines.dispose();\n        }, LASER_LENGTH_MS);\n    };\n\n    const showAttacks = (scene, move, isLhs) => {\n        // for ships, each ship attacks next ship [0..n] meshes\n        const sourceMeshes = isLhs ? shipMeshesLhs : shipMeshesRhs;\n        const targetMeshes = isLhs ? shipMeshesRhs : shipMeshesLhs;\n        _.each(sourceMeshes[move.source], (sourceMesh, ind) => {\n            if (!targetMeshes[move.target] || !targetMeshes[move.target].length) {\n                return;\n            }\n\n            const targetMeshIndex = ind % targetMeshes[move.target].length;\n            const targetMesh = targetMeshes[move.target][targetMeshIndex];\n\n            showLaser(scene, move.source, sourceMesh, targetMesh);\n        });\n    };\n\n    const playMoves = (scene, moves, isLhs, shipHpsLhs, shipHpsRhs) => {\n        const _recursiveMover = (ind, mainResolver) => {\n            const move = moves[ind];\n\n            if (!move) {\n                return mainResolver();\n            }\n\n            let movePromise;\n            if (move.moveType === 2) {\n                movePromise = moveShips(scene, move, isLhs);\n            } else if (move.moveType === 1) {\n                movePromise = new Promise((resolve, reject) => {\n                    showAttacks(scene, move, isLhs);\n                    const shipHps = isLhs ? shipHpsRhs : shipHpsLhs;\n                    shipHps[move.target] -= move.damage;\n                    applyHpsToVisuals(scene, move.target, isLhs, shipHpsLhs,\n                        shipHpsRhs);\n                    logAttack(move, isLhs);\n\n                    setTimeout(resolve, SHOOT_GAP_MS);\n                });\n            }\n\n            movePromise.then(() => {\n                if (ind + 1 < moves.length) {\n                    _recursiveMover(ind + 1, mainResolver);\n                } else {\n                    mainResolver();\n                }\n            });\n        }\n\n        return new Promise((resolve, reject) => {\n            _recursiveMover(0, resolve);\n        });\n    };\n\n    const playRound = (scene, round, shipHpsLhs, shipHpsRhs) => { // recursive\n        if (round >= props.result.rounds) {\n            setShowingResult(true);\n            return;\n        }\n\n        setRound(round);\n        logRoundStart(round);\n\n        const lhsMoves = _.filter(props.result.lhs, (move) => {\n            return move.round === round && move.moveType !== 0;\n        });\n        const rhsMoves = _.filter(props.result.rhs, (move) => {\n            return move.round === round && move.moveType !== 0;\n        });\n\n        playMoves(scene, lhsMoves, true, shipHpsLhs, shipHpsRhs).then(() => {\n            playMoves(scene, rhsMoves, false, shipHpsLhs, shipHpsRhs).then(() => {\n                playRound(scene, round + 1, shipHpsLhs, shipHpsRhs);\n            });\n        })\n    };\n\n    const playCombat = (scene) => {\n        const shipHpsLhs = _.map(props.selectionLhs, (count, index) => {\n            return Ships[index].stats.hp * count;\n        });\n        const shipHpsRhs = _.map(props.selectionRhs, (count, index) => {\n            return Ships[index].stats.hp * count;\n        });\n\n        playRound(scene, 0, shipHpsLhs, shipHpsRhs);\n    };\n\n    const onSceneMount = (e) => {\n        const { canvas, scene } = e;\n\n        scene.getEngine().loadingScreen = new OmegaLoadingScreen();\n\n        const camera = new ArcRotateCamera('camera1',\n            Math.PI / 2, (Math.PI / 2) + Math.PI / 4, 18.5, Vector3.Zero(), scene);\n        camera.minZ = 0.001;\n        camera.lowerRadiusLimit = 18.5;\n        camera.upperRadiusLimit = 18.5;\n        scene.activeCameras.push(camera);\n        camera.attachControl(canvas, true);\n\n        const light = new HemisphericLight('light1', new Vector3(0, 0, 1), scene);\n        light.intensity = 0.7;\n\n        const background = new Layer('background',\n            '/assets/images/jeremy-perkins-uhjiu8FjnsQ-unsplash.jpg', scene);\n        background.isBackground = true;\n        background.texture.level = 0;\n        background.texture.wAng = .2;\n\n        loadResources(scene).then(() => {\n            setResourcesLoaded(true);\n            playCombat(scene);\n        })\n    };\n\n    const getWinnerString = () => {\n        if (props.result.lhsDead) {\n            return 'Defender Wins';\n        } else if (props.result.rhsDead) {\n            return 'Attacker Wins';\n        } else {\n            return 'Draw';\n        }\n    }\n\n    const commanderAssetLhs = Commanders[props.commanderLhs].asset + 'thumb.png';\n    const commanderAssetRhs = Commanders[props.commanderRhs].asset + 'thumb.png';\n\n    return (\n        <div className=\"Combat\">\n            <Engine antialias={true} adaptToDeviceRatio={true} canvasId=\"combat\">\n                <Scene onSceneMount={onSceneMount}/>\n            </Engine>\n            {resourcesLoaded &&\n                <div className=\"ui\">\n                    <div className=\"uiElement commander lhs\">\n                        <img alt=\"Commander\" src={commanderAssetLhs}>\n                        </img>\n                    </div>\n                    <div className=\"uiElement commander rhs\">\n                        <img alt=\"Commander\" src={commanderAssetRhs}>\n                        </img>\n                    </div>\n                    <div className=\"uiElement currentRound\">\n                        Round {round+1}\n                    </div>\n                    <div className=\"uiElement combatLog\">\n                        <pre>{combatLog}</pre>\n                    </div>\n                    <div className=\"uiElement doneBox bottomBox\" onClick={() => { setShowingResult(true) }}>\n                        FINISH\n                    </div>\n                    <div className=\"miniLogoBox\"></div>\n                    {showingResult &&\n                        <div className=\"result\">\n                            <div className=\"resultDialog\">\n                                <div className=\"winner\">\n                                    {getWinnerString()}\n                                </div>\n                                <a className=\"exitButton\" href=\"/\">\n                                    EXIT\n                                </a>\n                            </div>\n                        </div>\n                    }\n                </div>\n            }\n        </div>\n    );\n}\n","import './OpponentSelection.css';\nimport React from 'react';\nimport _ from 'underscore';\nimport { ethers } from 'ethers';\n\n\n// props.opponents, props.onDone\nexport const OpponentSelection = (props) => {\n    const selectOpponent = (opponent) => {\n        props.onDone(opponent);\n    };\n\n    const renderOpponent = (opponent, ind) => {\n        return (\n            <div\n                key={ind}\n                className=\"mainMenuItem\"\n                onClick={() => { selectOpponent(opponent) }}\n            >\n                {ethers.utils.parseBytes32String(opponent.name)}\n            </div>\n        );\n    };\n\n    const opponents = _.clone(props.opponents).reverse();\n\n    return (\n        <div className=\"OpponentSelection\">\n            <div className=\"ui\">\n                <div className=\"mainTitle\">\n                </div>\n                <div className=\"mainMenu\">\n                    {_.map(opponents, renderOpponent)}\n                </div>\n                <a className=\"uiElement cancelBox bottomBox\" href=\"/\">\n                    BACK\n                </a>\n            </div>\n        </div>\n    );\n};\n","import './Leaderboard.css';\nimport React from 'react';\nimport _ from 'underscore';\nimport { ethers } from 'ethers';\n\n\n// props.opponents, props.onDone\nexport const Leaderboard = (props) => {\n    const renderEntry = (entry, ind) => {\n        return (\n            <div\n                key={ind}\n                className=\"mainMenuItem\"\n            >\n                <div className=\"name\">{ethers.utils.parseBytes32String(entry.name)}</div>\n                <div className=\"address\">Address: {entry.player}</div>\n                <div className=\"wins\">Wins: {entry.wins}</div>\n                <div className=\"losses\">Losses: {entry.losses}</div>\n            </div>\n        );\n    };\n\n    const leaderboard = _.clone(props.leaderboard);\n    leaderboard.sort((lhs, rhs) => {\n        return rhs.wins.toNumber() - lhs.wins.toNumber();\n    });\n\n    return (\n        <div className=\"Leaderboard\">\n            <div className=\"ui\">\n                <div className=\"mainTitle\">\n                </div>\n                <div className=\"mainMenu\">\n                    {_.map(leaderboard, renderEntry)}\n                </div>\n                <a className=\"uiElement cancelBox bottomBox\" href=\"/\">\n                    BACK\n                </a>\n            </div>\n        </div>\n    );\n};\n","import './ShowLogs.css';\nimport React from 'react';\nimport _ from 'underscore';\nimport { ethers } from 'ethers';\n\n\n// props.opponents, logs, props.onDone\nexport const ShowLogs = (props) => {\n    const selectLog = (log) => {\n        props.onDone(log);\n    };\n\n    const addressToName = (address) => {\n        const opponent = _.findWhere(props.opponents, {\n            player: address,\n        });\n        return opponent\n            ? ethers.utils.parseBytes32String(opponent.name)\n            : 'Anonymous';\n    }\n\n    const renderLog = (log, ind) => {\n        return (\n            <div\n                key={ind}\n                className=\"mainMenuItem\"\n                onClick={() => { selectLog(log) }}\n            >\n                <span className=\"address\">{addressToName(log.args[0])}</span>\n                <span className=\"vs\"> VS </span>\n                <span className=\"address\">{addressToName(log.args[1])}</span>\n            </div>\n        );\n    };\n\n    const logs = _.clone(props.logs).reverse();\n\n    return (\n        <div className=\"ShowLogs\">\n            <div className=\"ui\">\n                <div className=\"mainTitle\">\n                </div>\n                <div className=\"mainMenu\">\n                    {_.map(logs, renderLog)}\n                </div>\n                <a className=\"uiElement cancelBox bottomBox\" href=\"/\">\n                    BACK\n                </a>\n            </div>\n        </div>\n    );\n};\n","import _ from 'underscore';\nimport { Ships } from './Ships';\n\n\nexport const GameEngine = (selectionLhs, selectionRhs) => {\n    const MAX_ROUNDS = 50;\n    const BOARD_SIZE = 15;\n\n    const shipPositionsLhs = [ 10, 11, 12, 13 ];\n    const shipPositionsRhs = [ -10, -11, -12, -13 ];\n\n    const shipMaxHpLhs = _.map(selectionLhs, (count, index) => {\n        return (Ships[index].stats.hp * count) || 0;\n    });\n    const shipMaxHpRhs = _.map(selectionRhs, (count, index) => {\n        return (Ships[index].stats.hp * count) || 0;\n    });\n    let shipHpsLhs = _.clone(shipMaxHpLhs);\n    let shipHpsRhs = _.clone(shipMaxHpRhs);\n\n    const isLhsDead = () => {\n        return !_.find(shipHpsLhs, (shipHp) => shipHp > 0);\n    };\n    const isRhsDead = () => {\n        return !_.find(shipHpsRhs, (shipHp) => shipHp > 0);\n    };\n\n    const getTarget = (currentShip, shipPositionsOwn, shipPositionsEnemy, shipHpsEnemy) => {\n        const position = shipPositionsOwn[currentShip];\n        const distances = _.map(shipPositionsEnemy, (positionTarget, enemyShip) => {\n            const distance = Math.abs(position - positionTarget);\n\n            if (shipHpsEnemy[enemyShip] <= 0) {\n                return Number.MAX_SAFE_INTEGER;\n            }\n            if (distance > Ships[currentShip].stats.range) {\n                return Number.MAX_SAFE_INTEGER;\n            }\n            return distance;\n        });\n        const min = _.min(distances);\n        const index = distances.indexOf(min);\n\n        return min === Number.MAX_SAFE_INTEGER ? null : index;\n    };\n\n    const getTargetLhs = (currentShip) => {\n        return getTarget(currentShip, shipPositionsLhs, shipPositionsRhs, shipHpsRhs);\n    };\n\n    const getTargetRhs = (currentShip) => {\n        return getTarget(currentShip, shipPositionsRhs, shipPositionsLhs, shipHpsLhs);\n    };\n\n    const getRandomInt = (max) => {\n        return Math.floor(Math.random() * Math.floor(max));\n    };\n\n    const calculateDamage = (source, target, sourceHp, sourceMaxHp) => {\n        const attack = Ships[source].stats.attack.base +\n            getRandomInt(Ships[source].stats.attack.variable);\n        const defence = Ships[target].stats.defence;\n        const accuracy = 100 - Ships[target].stats.agility;\n        const damage = (attack - defence) * accuracy * (sourceHp / sourceMaxHp);\n\n        const sourceShipsCount = Math.ceil(sourceHp / Ships[source].stats.hp);\n        const capDamage = sourceShipsCount * Ships[target].stats.hp;\n\n        return Math.min(Math.floor(Math.max(0, damage)), capDamage);\n    };\n\n    const isPositionFree = (position) => {\n        if (Math.abs(position) > BOARD_SIZE) {\n            return false;\n        }\n\n        return !_.find(shipPositionsLhs, (positionIter, ind) => {\n            return positionIter === position && shipHpsLhs[ind] > 0;\n        }) && !_.find(shipPositionsRhs, (positionIter, ind) => {\n            return positionIter === position && shipHpsRhs[ind] > 0;\n        });\n    };\n\n    const moveShips = (shipPositions, source, direction) => {\n        const speed = Ships[source].stats.speed;\n\n        for (let speedCheck = speed; speedCheck > 0; speedCheck--) {\n            const proposedPosition = shipPositions[source] + direction * speedCheck;\n            if (isPositionFree(proposedPosition)) {\n                shipPositions[source] = proposedPosition;\n                break;\n            }\n        }\n\n        return shipPositions[source];\n    };\n\n    const moveShipLhs = (source) => {\n        return moveShips(shipPositionsLhs, source, -1);\n    };\n\n    const moveShipRhs = (source) => {\n        return moveShips(shipPositionsRhs, source, 1);\n    };\n\n    const lhsMoves = [], rhsMoves = [];\n    const logShoot = (round, moves, source, target, damage) => {\n        moves.push({\n            moveType: 'shoot',\n            round,\n            source,\n            target,\n            damage,\n        });\n    };\n\n    const logMove = (round, moves, source, targetPosition) => {\n        moves.push({\n            moveType: 'move',\n            round,\n            source,\n            targetPosition,\n        });\n    };\n\n    const logLhsShoot = (round, source, target, damage) => {\n        logShoot(round, lhsMoves, source, target, damage);\n    };\n\n    const logLhsMove = (round, source, targetPosition) => {\n        logMove(round, lhsMoves, source, targetPosition);\n    };\n\n    const logRhsShoot = (round, source, target, damage) => {\n        logShoot(round, rhsMoves, source, target, damage);\n    };\n\n    const logRhsMove = (round, source, targetPosition) => {\n        logMove(round, rhsMoves, source, targetPosition);\n    };\n\n    let round;\n    for (round = 0; round < MAX_ROUNDS && !isLhsDead() && !isRhsDead(); round++) {\n        // Left turn\n        for (let currentShip = 0; currentShip < Ships.length; currentShip++) {\n            if (shipHpsLhs[currentShip] > 0) {\n                const target = getTargetLhs(currentShip);\n                if (target || target === 0) { // Shoot\n                    const damage = calculateDamage(currentShip, target,\n                        shipHpsLhs[currentShip], shipMaxHpLhs[currentShip]);\n                    shipHpsRhs[target] -= damage;\n                    logLhsShoot(round, currentShip, target, damage);\n                } else { // Move\n                    moveShipLhs(currentShip);\n                    logLhsMove(round, currentShip, shipPositionsLhs[currentShip]);\n                }\n            }\n        }\n\n        // Right turn\n        for (let currentShip = 0; currentShip < Ships.length; currentShip++) {\n            if (shipHpsRhs[currentShip] > 0) {\n                const target = getTargetRhs(currentShip);\n                if (target || target === 0) { // Shoot\n                    const damage = calculateDamage(currentShip, target,\n                        shipHpsRhs[currentShip], shipMaxHpRhs[currentShip]);\n                    shipHpsLhs[target] -= damage;\n                    logRhsShoot(round, currentShip, target, damage);\n                } else { // Move\n                    moveShipRhs(currentShip);\n                    logRhsMove(round, currentShip, shipPositionsRhs[currentShip]);\n                }\n            }\n        }\n    }\n\n    return {\n        lhs: lhsMoves,\n        rhs: rhsMoves,\n        lhsHp: shipHpsLhs,\n        rhsHp: shipHpsRhs,\n        rounds: round,\n    };\n};\n","import './App.css';\nimport React, { Component } from 'react';\nimport { ethers } from 'ethers';\nimport * as TrinitySDK from \"@elastosfoundation/trinity-dapp-sdk\";\nimport { ShipSelection } from './scenes/ShipSelection';\nimport { CommanderSelection } from './scenes/CommanderSelection';\nimport { Combat } from './scenes/Combat';\nimport { OpponentSelection } from './ui/OpponentSelection';\nimport { Leaderboard } from './ui/Leaderboard';\nimport { ShowLogs } from './ui/ShowLogs';\nimport { GameEngine } from './definitions/GameEngine';\nimport { Ships } from './definitions/Ships';\nimport _ from 'underscore';\n\n\n\nconst Modes = {\n    MainScreen: 0,\n    ShipSelection: 1,\n    CommanderSelection: 2,\n    CommanderPreview: 3,\n    Combat: 4,\n    OpponentSelection: 5,\n    ShowLogs: 6,\n    Leaderboard: 7,\n};\n\nexport default class OmegaApp extends Component {\n    constructor(props) {\n        super(props);\n\n        this.defaultLoadedState = {\n            mode: Modes.MainScreen,\n            loading: false,\n            trainingSelfSelection: null,\n            trainingResult: null,\n            trainingSelfCommander: null,\n            trainingOpponent: null,\n            trainingOpponentSelection: null,\n            trainingOpponentCommander: null,\n            trainingCp: null,\n            defenders: null,\n            settingDefence: false,\n            settingAttack: false,\n        };\n\n        this.defaultUnloadedState = {\n            ownAccount: null,\n            web3Loaded: false,\n            ethBalance: 0,\n            blockNumber: 0,\n            newOmegaContract: null,\n            hasUnseenFights: false,\n            playerName: window.localStorage.getItem('OmegaPlayerName') || 'Anonymous',\n        };\n\n        this.state = {\n            ...this.defaultLoadedState,\n            ...this.defaultUnloadedState,\n        };\n    }\n\n    shipSelectionDone(selection) {\n        const trainingResult = !this.state.settingDefence &&\n            GameEngine(selection, this.state.trainingOpponentSelection);\n\n        this.setState({\n            mode: Modes.CommanderSelection,\n            trainingSelfSelection: selection,\n            trainingResult,\n        });\n    }\n\n    async commanderSelectionDone(commander) {\n        if (this.state.settingDefence) {\n            this.setState({\n                loading: true,\n            });\n\n            try {\n                const tx = await this.state.newOmegaContract.registerDefence(\n                    this.state.trainingSelfSelection,\n                    commander,\n                    ethers.utils.formatBytes32String(this.state.playerName)\n                );\n\n                await tx.wait();\n            } catch (error) {\n            }\n\n            this.setState(this.defaultLoadedState);\n        } else if (this.state.settingAttack) {\n            this.setState({\n                loading: true,\n            });\n\n            try {\n                const tx = await this.state.newOmegaContract.attack(\n                    this.state.trainingOpponent,\n                    this.state.trainingSelfSelection,\n                    commander\n                );\n\n                await tx.wait();\n            } catch (error) {\n            }\n\n            this.setState(this.defaultLoadedState);\n        } else {\n            this.setState({\n                mode: Modes.Combat,\n                trainingSelfCommander: commander,\n            });\n        }\n    }\n\n    commanderPreviewDone() {\n        this.setState(this.defaultLoadedState);\n    }\n\n    opponentSelectionDone(opponent) {\n        const trainingOpponentSelection = opponent.defenceSelection;\n\n        this.setState({\n            mode: Modes.ShipSelection,\n            settingAttack: true,\n            trainingOpponent: opponent.player,\n            trainingOpponentSelection,\n            trainingOpponentCommander: opponent.commander,\n            trainingCp: this._selectionToCp(trainingOpponentSelection),\n        });\n    }\n\n    _selectionToCp(selection) {\n        return _.reduce(selection, (memo, num, index) => {\n            return memo + (num || 0) * Ships[index].stats.cp;\n        }, 0);\n    }\n\n    handlePlayerNameChange(e) {\n        window.localStorage.setItem('OmegaPlayerName', e.target.value);\n        this.setState({\n            playerName: e.target.value,\n        });\n    }\n\n    training() {\n        const trainingOpponentSelection = [25, 18, 16, 6];\n\n        this.setState({\n            mode: Modes.ShipSelection,\n            trainingOpponentSelection,\n            trainingCp: this._selectionToCp(trainingOpponentSelection),\n        });\n    }\n\n    commanders() {\n        this.setState({\n            mode: Modes.CommanderPreview,\n        });\n    }\n\n    defend() {\n        const trainingOpponentSelection = [25, 18, 16, 6];\n\n        this.setState({\n            mode: Modes.ShipSelection,\n            settingDefence: true,\n            trainingOpponentSelection,\n            trainingCp: this._selectionToCp(trainingOpponentSelection),\n        });\n    }\n\n    attachBlockchainEvents(provider, newOmegaContract, ownAccount) {\n        const filter = newOmegaContract.filters.FightComplete();\n        filter.attacker = ownAccount;\n\n        provider.on(filter, () => {\n            this.setState({\n                hasUnseenFights: true,\n            });\n        });\n\n        provider.on('block', (blockNumber) => {\n            this._checkBalance(provider, ownAccount);\n            this.setState({\n                blockNumber,\n            });\n        });\n    }\n\n    async showLogs() {\n        const filterAttacker = this.state.newOmegaContract.filters.FightComplete();\n        filterAttacker.fromBlock = this.state.provider.getBlockNumber().then((b) => b - 100000);\n        filterAttacker.toBlock = 'latest';\n        filterAttacker.attacker = this.state.ownAccount;\n\n        const filterDefender = this.state.newOmegaContract.filters.FightComplete();\n        filterAttacker.fromBlock = this.state.provider.getBlockNumber().then((b) => b - 100000);\n        filterAttacker.toBlock = 'latest';\n        filterAttacker.defender = this.state.ownAccount;\n\n        this.setState({\n            loading: true,\n        });\n\n        let logsAttacker, logsDefender;\n\n        try {\n            logsAttacker = await this.state.provider.getLogs(filterAttacker);\n            logsDefender = await this.state.provider.getLogs(filterDefender);\n        } catch (error) {\n            return this.setState(this.defaultLoadedState);\n        }\n\n        const logs = logsAttacker.concat(logsDefender);\n        const logsParsed = _.map(logs, (log) => {\n            return this.state.newOmegaContract.interface.parseLog(log);\n        });\n\n        let defenders;\n\n        try {\n            defenders = await this.state.newOmegaContract.getAllDefenders();\n        } catch (error) {\n            return this.setState(this.defaultLoadedState);\n        }\n\n        this.setState({\n            mode: Modes.ShowLogs,\n            logs: logsParsed,\n            loading: false,\n            hasUnseenFights: false,\n            defenders,\n        });\n    }\n\n    async logSelectionDone(log) {\n        const metaResult = log.args[2];\n\n        this.setState({\n            loading: true,\n        });\n\n        let result;\n\n        try {\n            result = await this.state.newOmegaContract.replay(\n                metaResult.seed,\n                metaResult.selectionLhs,\n                metaResult.selectionRhs,\n                metaResult.commanderLhs,\n                metaResult.commanderRhs);\n        } catch (error) {\n            return this.setState(this.defaultLoadedState);\n        }\n\n        const _parseHp = (hp) => {\n            return _.map(hp, (hpInst) => {\n                return hpInst.toNumber();\n            });\n        }\n\n        const resultJson = {\n            lhs: result.lhs,\n            rhs: result.rhs,\n            lhsHp: _parseHp(result.lhsHp),\n            rhsHp: _parseHp(result.rhsHp),\n            rounds: result.rounds,\n            selectionLhs: result.selectionLhs,\n            selectionRhs: result.selectionRhs,\n            commanderLhs: result.commanderLhs,\n            commanderRhs: result.commanderRhs,\n            lhsDead: result.lhsDead,\n            rhsDead: result.rhsDead,\n        };\n\n        this.setState({\n            mode: Modes.Combat,\n            trainingSelfSelection: resultJson.selectionLhs,\n            trainingSelfCommander: resultJson.commanderLhs,\n            trainingOpponentSelection: resultJson.selectionRhs,\n            trainingResult: resultJson,\n            loading: false,\n        });\n    }\n\n    async attack() {\n        this.setState({\n            loading: true,\n        });\n\n        let defenders;\n\n        try {\n            defenders = await this.state.newOmegaContract.getAllDefenders();\n        } catch (error) {\n            return this.setState(this.defaultLoadedState);\n        }\n\n        this.setState({\n            mode: Modes.OpponentSelection,\n            defenders,\n            loading: false,\n        });\n    }\n\n    async leaderboard() {\n        this.setState({\n            loading: true,\n        });\n\n        let leaderboard;\n\n        try {\n            leaderboard = await this.state.newOmegaContract.getLeaderboard();\n        } catch (error) {\n            return this.setState(this.defaultLoadedState);\n        }\n\n        this.setState({\n            mode: Modes.Leaderboard,\n            leaderboard,\n            loading: false,\n        });\n    }\n\n    render() {\n        const logsClassName = `mainMenuItem ${this.state.hasUnseenFights ? 'unread' : ''}`;\n        const ethBalanceString = this._formatBalance(ethers.utils.formatEther(this.state.ethBalance));\n\n        return (\n            <div className=\"App\">\n                {this.state.mode === Modes.MainScreen &&\n                    <div className=\"mainScreen ui\">\n                        <div className=\"mainTitle\">\n                        </div>\n                        <div className=\"playerName\">\n                            <input autoCorrect=\"off\" type=\"text\" className=\"playerNameInput\" value={this.state.playerName}\n                                onChange={this.handlePlayerNameChange.bind(this)}/>\n                        </div>\n                        <div className=\"mainMenu\">\n                            <div className=\"mainMenuItem\" onClick={this.training.bind(this)}>\n                                TRAINING\n                            </div>\n                            <div className=\"mainMenuItem\" onClick={this.commanders.bind(this)}>\n                                ACADEMY\n                            </div>\n                            <div className={logsClassName} onClick={this.showLogs.bind(this)}>\n                                LOGS\n                            </div>\n                            <div className=\"mainMenuItem\" onClick={this.defend.bind(this)}>\n                                DEFENCE\n                            </div>\n                            <div className=\"mainMenuItem\" onClick={this.attack.bind(this)}>\n                                ATTACK\n                            </div>\n                            <div className=\"mainMenuItem\" onClick={this.leaderboard.bind(this)}>\n                                RANKING\n                            </div>\n                        </div>\n                        <div className=\"versionBox uiElement bottomElement\">\n                            Version: 0.0.1 (c) celrisen.eth\n                        </div>\n                        <div className=\"ethBalance uiElement bottomElement\">\n                            {ethBalanceString} Block: {this.state.blockNumber}\n                        </div>\n                    </div>\n                }\n                {this.state.mode === Modes.ShipSelection &&\n                    <ShipSelection maxCp={this.state.trainingCp} onDone={this.shipSelectionDone.bind(this)}/>\n                }\n                {this.state.mode === Modes.CommanderSelection &&\n                    <CommanderSelection onDone={this.commanderSelectionDone.bind(this)}/>\n                }\n                {this.state.mode === Modes.CommanderPreview &&\n                    <CommanderSelection onDone={this.commanderPreviewDone.bind(this)}/>\n                }\n                {this.state.mode === Modes.Combat &&\n                    <Combat selectionLhs={this.state.trainingSelfSelection}\n                        selectionRhs={this.state.trainingOpponentSelection}\n                        commanderLhs={this.state.trainingSelfCommander}\n                        commanderRhs={0}\n                        result={this.state.trainingResult}\n                    />\n                }\n                {this.state.mode === Modes.OpponentSelection &&\n                    <OpponentSelection opponents={this.state.defenders}\n                        onDone={this.opponentSelectionDone.bind(this)}\n                    />\n                }\n                {this.state.mode === Modes.ShowLogs &&\n                    <ShowLogs logs={this.state.logs}\n                        opponents={this.state.defenders} onDone={this.logSelectionDone.bind(this)}/>\n                }\n                {this.state.mode === Modes.Leaderboard &&\n                    <Leaderboard leaderboard={this.state.leaderboard}/>\n                }\n                <div\n                    id=\"omegaLoadingScreen\"\n                    style={this.state.web3Loaded && !this.state.loading ? {display: 'none'} : {}}>\n                    <div className=\"logo\"/>\n                    <div className=\"progressOuter progress-line\"/>\n                </div>\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        this._initWeb3();\n    }\n\n    _formatBalance(balance) {\n        return parseFloat(balance, 10).toFixed(4).toString();\n    }\n\n    async _initWeb3() {\n        // const provider = new TrinitySDK.Ethereum.Web3.Providers.TrinityWeb3Provider();\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner();\n\n        // const provider = new Web3(window.ethereum);\n        const accounts = await window.ethereum.send('eth_requestAccounts');\n        const ownAccount = accounts.result[0];\n\n        await this._checkBalance(provider, ownAccount);\n        this.setState({\n            provider,\n            ownAccount,\n            signer,\n        }, () => {\n            this._loadContracts(provider, signer, ownAccount);\n        });\n    }\n\n    async _checkBalance(provider, ownAccount) {\n        const ethBalance = await provider.getBalance(ownAccount);\n        this.setState({\n            ethBalance,\n        });\n    }\n\n    _loadContracts(provider, signer, ownAccount) {\n        const newOmegaJson = require('./abi/NewOmega.json');\n        const newOmegaAddress = '0xd4BCEB5e9C0c887B6a15239aAB3734EC741c3571';\n        const newOmegaContract = new ethers.Contract(newOmegaAddress, newOmegaJson, signer);\n\n        this.attachBlockchainEvents(provider, newOmegaContract, ownAccount);\n        this.setState({\n            newOmegaContract,\n            web3Loaded: true,\n        });\n    }\n}\n\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport {\n  IonApp,\n  IonIcon,\n  IonLabel,\n  IonRouterOutlet,\n  IonTabBar,\n  IonTabButton,\n  IonTabs\n} from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport { apps, flash, send } from 'ionicons/icons';\nimport OmegaApp from './OmegaApp';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\ndeclare let appManager: AppManagerPlugin.AppManager;\ndeclare let titleBarManager: TitleBarPlugin.TitleBarManager;\n\nconst App: React.FC = () => {\n  document.addEventListener('deviceready', () => {\n    titleBarManager.setVisibility(\n      1, // HIDDEN\n      1); // HIDDEN\n    appManager.setVisible('show');\n    window.screen.orientation.lock('landscape');\n  }, false);\n\n  return <IonApp>\n    <IonReactRouter>\n      <IonRouterOutlet>\n        <Route path=\"/\" component={OmegaApp} exact={true} />\n      </IonRouterOutlet>\n    </IonReactRouter>\n  </IonApp>\n};\n\nexport default App;\n","import * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nSentry.init({\n  dsn: \"https://adf39eeb31a04f4c9e2ae1613a647396@o509705.ingest.sentry.io/5604612\",\n  debug: true,\n  autoSessionTracking: true,\n\n  // We recommend adjusting this value in production, or using tracesSampler\n  // for finer control\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}